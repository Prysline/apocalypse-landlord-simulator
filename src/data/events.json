{
  "random_events": [
    {
      "id": "zombie_attack",
      "category": "combat",
      "title": "æ®­å±è¥²æ“Š",
      "description": "ä¸€ç¾¤æ®­å±æ­£åœ¨é è¿‘æˆ¿å±‹ï¼",
      "priority": 1,
      "trigger": {
        "type": "random",
        "probability": 0.3,
        "conditions": [
          {
            "type": "dayRange",
            "min": 3
          }
        ]
      },
      "choices": [
        {
          "id": "fortify_defense",
          "text": "åŠ å›ºé˜²ç¦¦ (-5å»ºæ)",
          "icon": "ğŸ›¡ï¸",
          "conditions": [
            {
              "type": "hasResource",
              "resource": "materials",
              "amount": 5
            }
          ],
          "effects": [
            {
              "type": "modifyResource",
              "resource": "materials",
              "amount": -5
            },
            {
              "type": "checkSoldierBonus",
              "effects": [
                {
                  "type": "modifyState",
                  "path": "buildingDefense",
                  "value": 2,
                  "operation": "add"
                },
                {
                  "type": "logMessage",
                  "message": "è»äººç§Ÿå®¢å”åŠ©é˜²ç¦¦ï¼Œæ•ˆæœæ›´ä½³ï¼",
                  "logType": "skill"
                }
              ]
            },
            {
              "type": "logMessage",
              "message": "æˆåŠŸæŠµç¦¦è¥²æ“Š",
              "logType": "event"
            }
          ]
        },
        {
          "id": "counter_attack",
          "text": "å†’éšªåæ“Š",
          "icon": "âš”ï¸",
          "conditions": [],
          "effects": [
            {
              "type": "probabilityCheck",
              "condition": {
                "base": 0.6,
                "modifiers": [
                  {
                    "type": "hasTenantType",
                    "tenantType": "soldier",
                    "bonus": 0.2
                  }
                ]
              },
              "success": [
                {
                  "type": "logMessage",
                  "message": "æˆåŠŸæ“Šé€€æ®­å±ï¼",
                  "logType": "event"
                }
              ],
              "failure": [
                {
                  "type": "damageRandomRoom",
                  "target": "random"
                },
                {
                  "type": "logMessage",
                  "message": "åæ“Šå¤±æ•—ï¼Œæˆ¿å±‹å—æ",
                  "logType": "danger"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "trader_caravan",
      "category": "economic",
      "title": "å•†éšŠéè·¯",
      "description": "ä¸€å€‹å•†éšŠç¶“éé™„è¿‘ï¼Œä»–å€‘é¡˜æ„é€²è¡Œç‰©è³‡äº¤æ˜“",
      "priority": 2,
      "trigger": {
        "type": "random",
        "probability": 0.25,
        "conditions": [
          {
            "type": "or",
            "conditions": [
              {
                "type": "hasResource",
                "resource": "fuel",
                "amount": 2
              },
              {
                "type": "hasResource",
                "resource": "cash",
                "amount": 20
              }
            ]
          }
        ]
      },
      "choices": [
        {
          "id": "trade_fuel_for_food",
          "text": "ç”¨ç‡ƒæ–™æ›é£Ÿç‰© (-3ç‡ƒæ–™, +10é£Ÿç‰©)",
          "icon": "ğŸ”„",
          "conditions": [
            {
              "type": "hasResource",
              "resource": "fuel",
              "amount": 3
            }
          ],
          "effects": [
            {
              "type": "modifyResource",
              "resource": "fuel",
              "amount": -3
            },
            {
              "type": "modifyResource",
              "resource": "food",
              "amount": 10
            },
            {
              "type": "logMessage",
              "message": "èˆ‡å•†éšŠäº¤æ˜“ï¼šç‡ƒæ–™æ›é£Ÿç‰©",
              "logType": "rent"
            }
          ]
        },
        {
          "id": "buy_medical_supplies",
          "text": "ç”¨ç¾é‡‘è²·é†«ç™‚ç”¨å“ (-$15, +4é†«ç™‚)",
          "icon": "ğŸ’Š",
          "conditions": [
            {
              "type": "hasResource",
              "resource": "cash",
              "amount": 15
            }
          ],
          "effects": [
            {
              "type": "modifyResource",
              "resource": "cash",
              "amount": -15
            },
            {
              "type": "modifyResource",
              "resource": "medical",
              "amount": 4
            },
            {
              "type": "logMessage",
              "message": "èˆ‡å•†éšŠäº¤æ˜“ï¼šç¾é‡‘æ›é†«ç™‚ç”¨å“",
              "logType": "rent"
            }
          ]
        },
        {
          "id": "sell_materials",
          "text": "å‡ºå”®å»ºææ›ç¾é‡‘ (-6å»ºæ, +$20)",
          "icon": "ğŸ’°",
          "conditions": [
            {
              "type": "hasResource",
              "resource": "materials",
              "amount": 6
            }
          ],
          "effects": [
            {
              "type": "modifyResource",
              "resource": "materials",
              "amount": -6
            },
            {
              "type": "modifyResource",
              "resource": "cash",
              "amount": 20
            },
            {
              "type": "logMessage",
              "message": "èˆ‡å•†éšŠäº¤æ˜“ï¼šå»ºææ›ç¾é‡‘",
              "logType": "rent"
            }
          ]
        },
        {
          "id": "refuse_trade",
          "text": "æ‹’çµ•äº¤æ˜“",
          "icon": "âŒ",
          "conditions": [],
          "effects": [
            {
              "type": "logMessage",
              "message": "æ‹’çµ•äº†å•†éšŠçš„äº¤æ˜“æè­°",
              "logType": "event"
            }
          ]
        }
      ]
    }
  ],
  "conflict_events": [
    {
      "id": "resource_dispute",
      "category": "social",
      "title": "è³‡æºåˆ†é…ç³¾ç´›",
      "description": "ç§Ÿå®¢å€‘å°å…±ç”¨è³‡æºçš„ä½¿ç”¨ç”¢ç”Ÿåˆ†æ­§ï¼Œæ°£æ°›ç·Šå¼µ",
      "priority": 1,
      "trigger": {
        "type": "conditional",
        "conditions": [
          {
            "type": "and",
            "conditions": [
              {
                "type": "hasTenantType",
                "tenantType": "any",
                "count": 2
              },
              {
                "type": "or",
                "conditions": [
                  {
                    "type": "resourceScarcity",
                    "resource": "food",
                    "threshold": "insufficient"
                  },
                  {
                    "type": "hasResource",
                    "resource": "fuel",
                    "amount": 5,
                    "operator": "<"
                  }
                ]
              }
            ]
          }
        ]
      },
      "dynamicChoices": {
        "base": [
          {
            "id": "increase_shared_resources",
            "text": "å¢åŠ å…±ç”¨è³‡æº (-6é£Ÿç‰©, -3ç‡ƒæ–™)",
            "conditions": [
              {
                "type": "and",
                "conditions": [
                  {
                    "type": "hasResource",
                    "resource": "food",
                    "amount": 6
                  },
                  {
                    "type": "hasResource",
                    "resource": "fuel",
                    "amount": 3
                  }
                ]
              }
            ],
            "effects": [
              {
                "type": "modifyResource",
                "resource": "food",
                "amount": -6
              },
              {
                "type": "modifyResource",
                "resource": "fuel",
                "amount": -3
              },
              {
                "type": "improveTenantSatisfaction",
                "target": "all",
                "amount": 3
              },
              {
                "type": "logMessage",
                "message": "å¢åŠ å…±ç”¨è³‡æºï¼Œå¹³æ¯äº†åˆ†é…ç³¾ç´›",
                "logType": "event"
              }
            ]
          },
          {
            "id": "establish_usage_rules",
            "text": "åˆ¶å®šä½¿ç”¨è¦å‰‡ (-$8åˆ¶ä½œè¦ç« )",
            "conditions": [
              {
                "type": "hasResource",
                "resource": "cash",
                "amount": 8
              }
            ],
            "effects": [
              {
                "type": "modifyResource",
                "resource": "cash",
                "amount": -8
              },
              {
                "type": "improveTenantSatisfaction",
                "target": "all",
                "amount": -2
              },
              {
                "type": "logMessage",
                "message": "åˆ¶å®šäº†è³‡æºä½¿ç”¨è¦ç« ï¼Œå‹‰å¼·è§£æ±ºç³¾ç´›",
                "logType": "event"
              }
            ]
          }
        ],
        "conditional": [
          {
            "condition": {
              "type": "hasTenantType",
              "tenantType": "elder",
              "count": 1
            },
            "choice": {
              "id": "elder_mediation",
              "text": "è«‹é•·è€…é€²è¡Œè³‡æºèª¿è§£",
              "icon": "ğŸ‘´",
              "effects": [
                {
                  "type": "elderMediation",
                  "context": "resource_dispute"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": "noise_complaint",
      "category": "social",
      "title": "å™ªéŸ³æŠ•è¨´",
      "description": "æœ‰ç§Ÿå®¢å› ç‚ºé„°å±…çš„å™ªéŸ³è€Œç„¡æ³•ä¼‘æ¯ï¼Œé›™æ–¹ç™¼ç”Ÿçˆ­åŸ·",
      "priority": 2,
      "trigger": {
        "type": "conditional",
        "conditions": [
          {
            "type": "hasTenantType",
            "tenantType": "any",
            "count": 2
          }
        ]
      },
      "dynamicChoices": {
        "base": [
          {
            "id": "support_complainant",
            "text": "æ”¯æŒæŠ•è¨´æ–¹ (-2é£Ÿç‰©å®‰æ’«)",
            "conditions": [
              {
                "type": "hasResource",
                "resource": "food",
                "amount": 2
              }
            ],
            "effects": [
              {
                "type": "modifyResource",
                "resource": "food",
                "amount": -2
              },
              {
                "type": "logMessage",
                "message": "æ”¯ä»˜é£Ÿç‰©å®‰æ’«æŠ•è¨´æ–¹ï¼Œæš«æ™‚å¹³æ¯ç³¾ç´›",
                "logType": "event"
              }
            ]
          }
        ],
        "conditional": [
          {
            "condition": {
              "type": "hasTenantType",
              "tenantType": "worker",
              "count": 1
            },
            "choice": {
              "id": "worker_soundproofing",
              "text": "è«‹å·¥äººå®‰è£éš”éŸ³è¨­æ–½ (-2å»ºæ)",
              "conditions": [
                {
                  "type": "hasResource",
                  "resource": "materials",
                  "amount": 2
                }
              ],
              "effects": [
                {
                  "type": "workerSoundproofing",
                  "context": "noise_complaint"
                }
              ]
            }
          },
          {
            "condition": {
              "type": "hasTenantType",
              "tenantType": "elder",
              "count": 1
            },
            "choice": {
              "id": "elder_noise_mediation",
              "text": "è«‹é•·è€…èª¿è§£å™ªéŸ³ç³¾ç´›",
              "effects": [
                {
                  "type": "elderMediation",
                  "context": "noise_complaint"
                }
              ]
            }
          }
        ]
      }
    }
  ],
  "special_events": [
    {
      "id": "medical_emergency",
      "category": "crisis",
      "title": "é†«ç™‚ç·Šæ€¥ç‹€æ³",
      "description": "æœ‰ç§Ÿå®¢çªç„¶é‡ç—…ï¼Œéœ€è¦ç«‹å³é†«ç™‚å”åŠ©",
      "priority": 3,
      "trigger": {
        "type": "conditional",
        "conditions": [
          {
            "type": "and",
            "conditions": [
              {
                "type": "hasTenantType",
                "tenantType": "any",
                "count": 1
              },
              {
                "type": "probability",
                "chance": 0.15
              }
            ]
          }
        ]
      },
      "choices": [
        {
          "id": "use_medical_supplies",
          "text": "ä½¿ç”¨é†«ç™‚ç”¨å“ (-3é†«ç™‚ç”¨å“)",
          "conditions": [
            {
              "type": "hasResource",
              "resource": "medical",
              "amount": 3
            }
          ],
          "effects": [
            {
              "type": "modifyResource",
              "resource": "medical",
              "amount": -3
            },
            {
              "type": "healTenant",
              "target": "sick"
            },
            {
              "type": "logMessage",
              "message": "åŠæ™‚æ²»ç™‚ï¼Œç§Ÿå®¢åº·å¾©äº†",
              "logType": "event"
            }
          ]
        },
        {
          "id": "seek_doctor_help",
          "text": "å°‹æ±‚é†«ç”Ÿç§Ÿå®¢å”åŠ©",
          "conditions": [
            {
              "type": "hasTenantType",
              "tenantType": "doctor",
              "count": 1
            }
          ],
          "effects": [
            {
              "type": "doctorEmergencyTreatment",
              "target": "sick"
            }
          ]
        },
        {
          "id": "do_nothing",
          "text": "ç„¡æ³•æä¾›å”åŠ©",
          "conditions": [],
          "effects": [
            {
              "type": "probabilityCheck",
              "condition": {
                "base": 0.6
              },
              "success": [
                {
                  "type": "logMessage",
                  "message": "ç§Ÿå®¢é è‡ªå·±æ¢å¾©äº†å¥åº·",
                  "logType": "event"
                }
              ],
              "failure": [
                {
                  "type": "removeTenant",
                  "target": "sick"
                },
                {
                  "type": "logMessage",
                  "message": "ç§Ÿå®¢å› ç¼ºä¹æ²»ç™‚è€Œé›¢é–‹äº†",
                  "logType": "danger"
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "scripted_events": [
    {
      "id": "first_week_guidance",
      "category": "tutorial",
      "title": "ç”Ÿå­˜æŒ‡å°",
      "description": "ä¸€ä½ç¶“é©—è±å¯Œçš„å€–å­˜è€…çµ¦äº†ä½ ä¸€äº›å»ºè­°",
      "priority": 0,
      "trigger": {
        "type": "scripted",
        "day": 7
      },
      "choices": [
        {
          "id": "accept_guidance",
          "text": "æ¥å—å»ºè­°",
          "effects": [
            {
              "type": "modifyResource",
              "resource": "food",
              "amount": 5
            },
            {
              "type": "logMessage",
              "message": "ç²å¾—äº†å¯¶è²´çš„ç”Ÿå­˜å»ºè­°å’Œè£œçµ¦",
              "logType": "event"
            }
          ]
        }
      ]
    }
  ]
}
