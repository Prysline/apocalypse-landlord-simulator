# 末日房東模擬器 - Apocalypse Landlord Simulator

一個基於末日殭屍背景的房東租屋經營遊戲，採用現代化模組重構策略，從單體架構演進為 ES6 模組系統。

## 🎮 遊戲特色

- **末日背景設定**：在殭屍橫行的世界中經營租屋事業
- **策略性租客管理**：平衡租客技能與感染風險
- **資源管理挑戰**：合理分配食物、建材、醫療用品等資源
- **動態事件系統**：隨機事件與租客互動豐富遊戲體驗
- **技能系統**：不同職業租客提供獨特技能和服務

## 🚀 快速開始

### 推薦遊玩方式
1. 下載 `src/game-refactored.html` 檔案（當前 v1.1 版本）
2. 使用任何現代瀏覽器開啟檔案
3. 開始您的末日房東之旅

### 替代版本
- `src/index.html`：v2.0-rc 模組化版本（重構完成95%）

### 遊戲目標
- 招募合適的租客並管理其需求
- 維持房屋防禦以抵禦殭屍威脅
- 平衡資源收支確保長期生存
- 善用租客技能應對各種挑戰

## 📁 專案結構

```
├── README.md                      # 📖 專案說明文件（本檔案）
├── PROJECT_STRUCTURE.md           # 📋 完整專案結構說明
└── src/
    ├── game-refactored.html       # 🎮 穩定版本 v1.1（推薦使用）
    ├── index.html                 # 🚀 重構版本 v2.0-rc（95%完成）
    ├── js/                        # 🔧 JavaScript模組目錄（重構完成）
    ├── data/                      # 📊 遊戲配置檔案
    │   ├── tenants.json           # 租客資料配置
    │   ├── skills.json            # 技能系統配置
    │   ├── events.json            # 事件系統配置
    │   └── rules.json             # 遊戲規則配置（擴展版）
    └── docs/
        └── architecture.md        # 架構設計文件
```

## 🎯 當前版本特色 v2.0-beta

### 完整業務系統模組化架構
本專案採用**直接模組分離重構策略**，當前版本 v2.0-beta 實現完整業務邏輯模組化：

- **配置驅動設計**：所有遊戲參數集中於 rules.json 管理
- **統一驗證機制**：validators.js 模組提供完整資料驗證
- **系統級常數**：constants.js 管理純技術常數，避免硬編碼
- **智慧後備機制**：配置載入失敗時自動切換後備模式
- **完整業務邏輯**：TenantSystem、SkillSystem、ResourceSystem 完整分離

### 技術亮點
- **DataManager v2.0**：整合統一驗證系統，強化錯誤處理
- **RuleEngine**：聲明式規則執行框架，支援複雜遊戲邏輯  
- **GameBridge**：系統整合協調，支援事件驅動架構
- **TenantSystem**：完整租客生命週期管理，支援事件通信
- **SkillSystem**：純配置驅動技能系統，被動觸發與主動執行
- **ResourceSystem**：資源流轉控制，統一閾值管理
- **GameHelpers v2.0**：配置驅動輔助函數，提供統一存取介面

## 📊 系統狀態監控

遊戲右上角顯示當前系統狀態：
- 🟢 模組化系統 v2.0 - 運行中：完整模組化業務邏輯
- 🟡 模組化系統 v2.0 - 後備模式：部分功能使用預設配置
- 🔴 系統啟動失敗：需要檢查瀏覽器支援度

## 🎲 遊戲機制

### 租客系統
- **5種職業類型**：醫生、工人、農夫、軍人、老人
- **個人資源管理**：每位租客擁有獨立的資源與現金
- **滿意度系統**：租客滿意度影響續租意願和互動效果
- **感染風險**：部分申請者可能已被感染，需要謹慎篩選

### 技能系統
每種職業提供獨特技能：
- **醫生**：治療感染、健康檢查、醫療生產
- **工人**：專業維修、房間加固、建築升級
- **農夫**：作物種植、野外採集、食物保存
- **軍人**：夜間警戒、防禦建設、巡邏系統
- **老人**：糾紛調解、生活指導、人際網絡

### 資源管理
- **食物**：房東和租客的基本生存需求
- **建材**：房屋維修和防禦升級材料
- **醫療用品**：治療疾病和檢測感染的必需品
- **燃料**：維持房屋基本運作的能源
- **現金**：支付租客服務和應急開支

### 事件系統
- **隨機事件**：殭屍襲擊、商隊過路等意外狀況
- **衝突事件**：租客糾紛、資源分配問題
- **特殊事件**：醫療緊急狀況、建築危機
- **動態選擇**：基於租客類型和遊戲狀態生成選項

## 🔄 重構進展

### 當前狀態：業務系統模組化 v2.0-rc ✅
- ✅ **核心架構系統**（DataManager、RuleEngine、GameBridge）已分離為模組
- ✅ **配置驅動體系**（rules.json 集中配置，helpers.js v2.0 配置驅動）
- ✅ **統一驗證機制**（validators.js 統一驗證邏輯）
- ✅ **系統級常數**（constants.js 純技術常數管理）
- ✅ **業務邏輯模組**（TRES四大模組：TenantSystem、ResourceSystem、EventSystem、SkillSystem）
- ✅ **主程式整合**（main.js 完整系統協調）
- 🚀 **UI系統模組**（UIManager、ModalManager 等待實作）

### 下一階段：UI系統完善 v2.0 🚀
**重構策略**：基於已完成的業務模組基礎，完成最後的使用者介面系統。

**重構目標**：
- ✅ **對話3A**：配置驅動核心架構（DataManager, RuleEngine, GameBridge, helpers, validators, constants）
- ✅ **對話3B**：業務系統分離（TenantSystem, SkillSystem, ResourceSystem, EventSystem, main.js 整合）
- 🚀 **對話3C**：UI系統完善（UIManager, ModalManager, DisplayUpdater, InteractionHandler）


**技術優勢**：
- **配置驅動**：所有遊戲參數可透過 rules.json 調整
- **開發效率提升**：模組獨立開發，並行協作
- **維護性增強**：職責分離，介面標準化
- **擴展性支援**：現代化架構，支援商業化發展

## 🤖 AI輔助開發聲明

本專案採用**人機協作模式**進行開發：

### 技術實作（AI輔助）
- **核心程式碼**：DataManager、RuleEngine、GameBridge 等系統模組
- **業務邏輯模組**：TenantSystem、SkillSystem、ResourceSystem 完整實作
- **配置驅動架構**：rules.json、validators.js、constants.js 設計與實作
- **遊戲配置**：JSON配置檔案的結構設計與內容
- **架構設計**：模組化架構規劃與技術決策
- **文件撰寫**：技術文件、API說明、開發指南

### 開發管理（人類主導）
- **需求分析**：遊戲功能規劃與優先級設定
- **技術決策**：最終架構選擇與實施策略
- **品質把關**：功能驗證、效能測試、使用者體驗
- **專案規劃**：開發節奏、里程碑設定、風險管理

### 協作優勢
- **效率提升**：AI處理繁重的程式碼實作，人類專注創意與決策
- **品質保證**：AI提供技術最佳實踐，人類確保實用性與可維護性  
- **學習加速**：透過協作過程深度理解現代化開發架構
- **創新可能**：結合AI的技術能力與人類的創意思維

## 📚 文件資源

- **[架構設計文件](docs/architecture.md)**：詳細的技術架構說明和重構策略
- **[專案結構說明](PROJECT_STRUCTURE.md)**：完整的檔案組織和開發規劃

## 🚧 開發狀態

### 已完成功能 v2.0-rc ✅
- ✅ **配置驅動核心架構**（DataManager v2.0、RuleEngine、GameBridge）
- ✅ **統一驗證機制**（validators.js 完整驗證邏輯）
- ✅ **系統級常數管理**（constants.js 純技術常數）
- ✅ **配置驅動輔助函數**（helpers.js v2.0）
- ✅ **集中配置體系**（rules.json 擴展版）
- ✅ **業務邏輯模組化**（TRES四大模組完整實作）
- ✅ **主程式系統整合**（main.js 完整協調）

### 進行中功能 🚀
- 🚀 **UI系統分離**（對話3C目標）
- 🚀 UIManager、ModalManager、DisplayUpdater、InteractionHandler 實作
- 🚀 現代化使用者介面管理架構

### 計劃功能 📋
- 📋 建構工具整合（Vite工作流程）
- 📋 自動化測試框架
- 📋 效能優化與監控
- 📋 商業化功能準備

## 🎯 技術特點

### 完整模組化開發架構
- **ES6 模組系統**：真正的模組化開發體驗
- **配置驅動設計**：rules.json 集中管理所有參數
- **統一驗證機制**：validators.js 提供完整資料驗證
- **智慧後備系統**：配置載入失敗時自動降級
- **事件驅動通信**：模組間透過事件進行協作

### 部署與相容性
- **零依賴**：不需要外部函式庫或框架
- **GitHub Pages 原生支援**：ES6模組直接部署
- **現代瀏覽器最佳化**：專注現代瀏覽器體驗
- **漸進增強**：向下相容性友好提示

### 開發體驗
- **模組化協作**：支援並行開發不同模組
- **配置驅動調整**：遊戲參數無需修改程式碼
- **即時驗證**：每個模組完成後立即整合測試
- **清晰架構**：職責分離，介面標準化
- **擴展就緒**：為商業化發展奠定基礎

## 🐛 問題回報

如果您遇到任何問題或有改進建議，請：
1. 檢查遊戲中的系統狀態指示器
2. 開啟瀏覽器開發者工具查看控制台訊息
3. 參考架構文件了解系統運作原理

## 📄 版權與使用條款

### 版權聲明
本專案及其所有內容（包括但不限於程式碼、文件、配置檔案、設計資源）均保留所有權利。

**Copyright © 2024. All Rights Reserved.**

### 使用許可
在版權法律框架明確AI生成內容歸屬前，本專案採用保守授權策略：

**✅ 允許用途**：
- 個人學習與研究
- 學術引用（需註明來源）
- 非商業性質的技術參考

**❌ 限制用途**：
- 商業使用或分發
- 修改後重新發布
- 移除版權聲明

### 法律考量說明
由於本專案大量使用AI輔助生成內容，在當前法律環境下，AI生成作品的版權歸屬存在不確定性。為避免潛在法律風險，暫採用保留版權的策略。

**未來授權規劃**：
待相關法律框架明確後，將考慮採用更開放的授權模式（如MIT、Apache 2.0等）。

---

**專案狀態**：業務系統模組化 v2.0-beta（80%完成）→ 事件系統分離 v2.0-rc（即將完成）  
**技術基礎**：配置驅動架構 + 完整業務邏輯模組已建立  
**預期時程**：2個對話完成剩餘重構  
**商業價值**：現代化架構為商業化發展奠定基礎